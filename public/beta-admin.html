<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ViewerValue Beta Management Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
    </style>
</head>
<body class="bg-gray-900 text-white">
    <!-- Header -->
    <header class="gradient-bg shadow-lg">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-6">
                <div class="flex items-center space-x-4">
                    <div class="w-10 h-10 bg-white rounded-lg flex items-center justify-center">
                        <span class="text-purple-600 font-bold text-lg">VV</span>
                    </div>
                    <div>
                        <h1 class="text-2xl font-bold text-white">ViewerValue Beta Management</h1>
                        <p class="text-purple-100">Beta Testing Program Dashboard</p>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <span class="text-purple-100">Last Updated: <span id="lastUpdated"></span></span>
                    <button onclick="refreshData()" class="bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg transition-colors">
                        🔄 Refresh
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Dashboard -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Key Metrics -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
            <div class="bg-gray-800 rounded-lg p-6 border border-gray-700">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-400 text-sm">Total Applications</p>
                        <p class="text-3xl font-bold text-white" id="totalApplications">0</p>
                    </div>
                    <div class="w-12 h-12 bg-blue-500/20 rounded-lg flex items-center justify-center">
                        <span class="text-blue-400 text-xl">📝</span>
                    </div>
                </div>
                <div class="mt-4">
                    <span class="text-green-400 text-sm">+12 this week</span>
                </div>
            </div>

            <div class="bg-gray-800 rounded-lg p-6 border border-gray-700">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-400 text-sm">Active Beta Testers</p>
                        <p class="text-3xl font-bold text-white" id="activeTesters">0</p>
                    </div>
                    <div class="w-12 h-12 bg-green-500/20 rounded-lg flex items-center justify-center">
                        <span class="text-green-400 text-xl">👥</span>
                    </div>
                </div>
                <div class="mt-4">
                    <span class="text-green-400 text-sm">85% retention rate</span>
                </div>
            </div>

            <div class="bg-gray-800 rounded-lg p-6 border border-gray-700">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-400 text-sm">Feedback Reports</p>
                        <p class="text-3xl font-bold text-white" id="feedbackReports">0</p>
                    </div>
                    <div class="w-12 h-12 bg-purple-500/20 rounded-lg flex items-center justify-center">
                        <span class="text-purple-400 text-xl">💬</span>
                    </div>
                </div>
                <div class="mt-4">
                    <span class="text-green-400 text-sm">+8 today</span>
                </div>
            </div>

            <div class="bg-gray-800 rounded-lg p-6 border border-gray-700">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-400 text-sm">Bug Reports</p>
                        <p class="text-3xl font-bold text-white" id="bugReports">0</p>
                    </div>
                    <div class="w-12 h-12 bg-red-500/20 rounded-lg flex items-center justify-center">
                        <span class="text-red-400 text-xl">🐛</span>
                    </div>
                </div>
                <div class="mt-4">
                    <span class="text-yellow-400 text-sm">3 critical</span>
                </div>
            </div>
        </div>

        <!-- Charts Section -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
            <!-- Application Trends -->
            <div class="bg-gray-800 rounded-lg p-6 border border-gray-700">
                <h3 class="text-lg font-semibold text-white mb-4">📈 Application Trends</h3>
                <canvas id="applicationChart" width="400" height="200"></canvas>
            </div>

            <!-- Platform Usage -->
            <div class="bg-gray-800 rounded-lg p-6 border border-gray-700">
                <h3 class="text-lg font-semibold text-white mb-4">📱 Platform Usage</h3>
                <canvas id="platformChart" width="400" height="200"></canvas>
            </div>
        </div>

        <!-- Recent Applications -->
        <div class="bg-gray-800 rounded-lg p-6 border border-gray-700 mb-8">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-lg font-semibold text-white">📋 Recent Applications</h3>
                <div class="flex space-x-2">
                    <button onclick="filterApplications('all')" class="px-3 py-1 bg-purple-600 text-white rounded text-sm">All</button>
                    <button onclick="filterApplications('pending')" class="px-3 py-1 bg-gray-600 text-white rounded text-sm">Pending</button>
                    <button onclick="filterApplications('approved')" class="px-3 py-1 bg-green-600 text-white rounded text-sm">Approved</button>
                    <button onclick="filterApplications('rejected')" class="px-3 py-1 bg-red-600 text-white rounded text-sm">Rejected</button>
                </div>
            </div>
            
            <div class="overflow-x-auto">
                <table class="w-full text-sm">
                    <thead>
                        <tr class="border-b border-gray-700">
                            <th class="text-left py-3 px-4 text-gray-400">Name</th>
                            <th class="text-left py-3 px-4 text-gray-400">Email</th>
                            <th class="text-left py-3 px-4 text-gray-400">Platforms</th>
                            <th class="text-left py-3 px-4 text-gray-400">Devices</th>
                            <th class="text-left py-3 px-4 text-gray-400">Applied</th>
                            <th class="text-left py-3 px-4 text-gray-400">Status</th>
                            <th class="text-left py-3 px-4 text-gray-400">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="applicationsTable">
                        <!-- Applications will be loaded here -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Beta Tester Management -->
        <div class="bg-gray-800 rounded-lg p-6 border border-gray-700 mb-8">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-lg font-semibold text-white">👥 Active Beta Testers</h3>
                <button onclick="exportBetaData()" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors">
                    📊 Export Data
                </button>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4" id="betaTestersGrid">
                <!-- Beta testers will be loaded here -->
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="bg-gray-800 rounded-lg p-6 border border-gray-700">
            <h3 class="text-lg font-semibold text-white mb-6">⚡ Quick Actions</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                <button onclick="sendBetaInvites()" class="p-4 bg-green-600 hover:bg-green-700 rounded-lg transition-colors">
                    <div class="text-center">
                        <span class="text-2xl mb-2 block">📧</span>
                        <span class="text-sm">Send Beta Invites</span>
                    </div>
                </button>
                
                <button onclick="generateReport()" class="p-4 bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors">
                    <div class="text-center">
                        <span class="text-2xl mb-2 block">📊</span>
                        <span class="text-sm">Generate Report</span>
                    </div>
                </button>
                
                <button onclick="manageFeedback()" class="p-4 bg-purple-600 hover:bg-purple-700 rounded-lg transition-colors">
                    <div class="text-center">
                        <span class="text-2xl mb-2 block">💬</span>
                        <span class="text-sm">Manage Feedback</span>
                    </div>
                </button>
                
                <button onclick="updateBetaStatus()" class="p-4 bg-orange-600 hover:bg-orange-700 rounded-lg transition-colors">
                    <div class="text-center">
                        <span class="text-2xl mb-2 block">🔄</span>
                        <span class="text-sm">Update Status</span>
                    </div>
                </button>
            </div>
        </div>
    </main>

    <!-- Modal for Application Details -->
    <div id="applicationModal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50">
        <div class="bg-gray-800 rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-semibold text-white">Application Details</h3>
                <button onclick="closeModal()" class="text-gray-400 hover:text-white">✕</button>
            </div>
            <div id="modalContent">
                <!-- Application details will be loaded here -->
            </div>
        </div>
    </div>

    <script>
        // Sample data - in production, this would come from your backend
        let applications = [
            {
                id: 'BETA_001',
                name: 'John Smith',
                email: 'john@example.com',
                platforms: ['facebook', 'instagram', 'youtube'],
                devices: ['desktop', 'mobile'],
                applied: '2024-01-15',
                status: 'pending',
                experience: 'Previous beta tester for social media apps',
                motivation: 'Interested in attention economy and token rewards'
            },
            {
                id: 'BETA_002',
                name: 'Sarah Johnson',
                email: 'sarah@example.com',
                platforms: ['tiktok', 'instagram', 'youtube'],
                devices: ['mobile', 'tablet'],
                applied: '2024-01-14',
                status: 'approved',
                experience: 'UX designer with testing experience',
                motivation: 'Want to help improve user experience'
            }
        ];

        let betaTesters = [
            {
                id: 'BETA_002',
                name: 'Sarah Johnson',
                email: 'sarah@example.com',
                joinDate: '2024-01-16',
                tokensEarned: 1250,
                feedbackSubmitted: 8,
                lastActive: '2024-01-20',
                platforms: ['tiktok', 'instagram', 'youtube']
            }
        ];

        // Initialize dashboard
        function initDashboard() {
            updateMetrics();
            loadApplications();
            loadBetaTesters();
            createCharts();
            updateLastUpdated();
        }

        function updateMetrics() {
            document.getElementById('totalApplications').textContent = applications.length;
            document.getElementById('activeTesters').textContent = betaTesters.length;
            document.getElementById('feedbackReports').textContent = betaTesters.reduce((sum, tester) => sum + tester.feedbackSubmitted, 0);
            document.getElementById('bugReports').textContent = '12'; // Sample data
        }

        function loadApplications() {
            const tbody = document.getElementById('applicationsTable');
            tbody.innerHTML = '';
            
            applications.forEach(app => {
                const row = document.createElement('tr');
                row.className = 'border-b border-gray-700 hover:bg-gray-700/50';
                row.innerHTML = `
                    <td class="py-3 px-4 text-white">${app.name}</td>
                    <td class="py-3 px-4 text-gray-300">${app.email}</td>
                    <td class="py-3 px-4 text-gray-300">${app.platforms.join(', ')}</td>
                    <td class="py-3 px-4 text-gray-300">${app.devices.join(', ')}</td>
                    <td class="py-3 px-4 text-gray-300">${app.applied}</td>
                    <td class="py-3 px-4">
                        <span class="px-2 py-1 rounded text-xs ${getStatusColor(app.status)}">${app.status}</span>
                    </td>
                    <td class="py-3 px-4">
                        <button onclick="viewApplication('${app.id}')" class="text-blue-400 hover:text-blue-300 mr-2">View</button>
                        ${app.status === 'pending' ? `
                            <button onclick="approveApplication('${app.id}')" class="text-green-400 hover:text-green-300 mr-2">Approve</button>
                            <button onclick="rejectApplication('${app.id}')" class="text-red-400 hover:text-red-300">Reject</button>
                        ` : ''}
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function loadBetaTesters() {
            const grid = document.getElementById('betaTestersGrid');
            grid.innerHTML = '';
            
            betaTesters.forEach(tester => {
                const card = document.createElement('div');
                card.className = 'bg-gray-700 rounded-lg p-4 border border-gray-600';
                card.innerHTML = `
                    <div class="flex items-center justify-between mb-3">
                        <h4 class="text-white font-semibold">${tester.name}</h4>
                        <span class="text-xs text-gray-400">${tester.lastActive}</span>
                    </div>
                    <div class="space-y-2 text-sm">
                        <div class="flex justify-between">
                            <span class="text-gray-400">Tokens Earned:</span>
                            <span class="text-green-400">${tester.tokensEarned} VVT</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-400">Feedback:</span>
                            <span class="text-blue-400">${tester.feedbackSubmitted} reports</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-400">Platforms:</span>
                            <span class="text-gray-300">${tester.platforms.length}</span>
                        </div>
                    </div>
                    <div class="mt-3 flex space-x-2">
                        <button onclick="contactTester('${tester.id}')" class="text-xs bg-blue-600 hover:bg-blue-700 px-2 py-1 rounded">Contact</button>
                        <button onclick="viewTesterDetails('${tester.id}')" class="text-xs bg-gray-600 hover:bg-gray-700 px-2 py-1 rounded">Details</button>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        function createCharts() {
            // Application trends chart
            const appCtx = document.getElementById('applicationChart').getContext('2d');
            new Chart(appCtx, {
                type: 'line',
                data: {
                    labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4'],
                    datasets: [{
                        label: 'Applications',
                        data: [5, 12, 18, 25],
                        borderColor: '#8B5CF6',
                        backgroundColor: 'rgba(139, 92, 246, 0.1)',
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            labels: { color: '#fff' }
                        }
                    },
                    scales: {
                        x: { ticks: { color: '#9CA3AF' } },
                        y: { ticks: { color: '#9CA3AF' } }
                    }
                }
            });

            // Platform usage chart
            const platformCtx = document.getElementById('platformChart').getContext('2d');
            new Chart(platformCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Facebook', 'TikTok', 'Instagram', 'YouTube', 'Fanbase'],
                    datasets: [{
                        data: [25, 30, 20, 20, 5],
                        backgroundColor: ['#3B82F6', '#EF4444', '#F59E0B', '#EF4444', '#8B5CF6']
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            labels: { color: '#fff' }
                        }
                    }
                }
            });
        }

        function getStatusColor(status) {
            switch(status) {
                case 'pending': return 'bg-yellow-600 text-yellow-100';
                case 'approved': return 'bg-green-600 text-green-100';
                case 'rejected': return 'bg-red-600 text-red-100';
                default: return 'bg-gray-600 text-gray-100';
            }
        }

        function viewApplication(id) {
            const app = applications.find(a => a.id === id);
            if (!app) return;

            const modalContent = document.getElementById('modalContent');
            modalContent.innerHTML = `
                <div class="space-y-4">
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="text-gray-400 text-sm">Name</label>
                            <p class="text-white">${app.name}</p>
                        </div>
                        <div>
                            <label class="text-gray-400 text-sm">Email</label>
                            <p class="text-white">${app.email}</p>
                        </div>
                    </div>
                    <div>
                        <label class="text-gray-400 text-sm">Platforms</label>
                        <p class="text-white">${app.platforms.join(', ')}</p>
                    </div>
                    <div>
                        <label class="text-gray-400 text-sm">Devices</label>
                        <p class="text-white">${app.devices.join(', ')}</p>
                    </div>
                    <div>
                        <label class="text-gray-400 text-sm">Experience</label>
                        <p class="text-white">${app.experience || 'Not provided'}</p>
                    </div>
                    <div>
                        <label class="text-gray-400 text-sm">Motivation</label>
                        <p class="text-white">${app.motivation || 'Not provided'}</p>
                    </div>
                    <div class="flex space-x-4 pt-4">
                        ${app.status === 'pending' ? `
                            <button onclick="approveApplication('${app.id}')" class="px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded">Approve</button>
                            <button onclick="rejectApplication('${app.id}')" class="px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded">Reject</button>
                        ` : `
                            <span class="px-4 py-2 ${getStatusColor(app.status)} rounded">${app.status.toUpperCase()}</span>
                        `}
                    </div>
                </div>
            `;
            
            document.getElementById('applicationModal').classList.remove('hidden');
        }

        function closeModal() {
            document.getElementById('applicationModal').classList.add('hidden');
        }

        function approveApplication(id) {
            const app = applications.find(a => a.id === id);
            if (app) {
                app.status = 'approved';
                loadApplications();
                closeModal();
                // In production, send approval email and beta access
                alert(`Approved ${app.name} for beta testing. Beta access email will be sent.`);
            }
        }

        function rejectApplication(id) {
            const app = applications.find(a => a.id === id);
            if (app) {
                app.status = 'rejected';
                loadApplications();
                closeModal();
                alert(`Rejected ${app.name}'s application.`);
            }
        }

        function refreshData() {
            // In production, fetch fresh data from backend
            updateLastUpdated();
            updateMetrics();
        }

        function updateLastUpdated() {
            document.getElementById('lastUpdated').textContent = new Date().toLocaleTimeString();
        }

        function sendBetaInvites() {
            const pendingApps = applications.filter(app => app.status === 'pending');
            alert(`Sending beta invites to ${pendingApps.length} pending applications.`);
        }

        function generateReport() {
            alert('Generating comprehensive beta testing report...');
        }

        function manageFeedback() {
            alert('Opening feedback management interface...');
        }

        function updateBetaStatus() {
            alert('Updating beta program status...');
        }

        function exportBetaData() {
            alert('Exporting beta tester data to CSV...');
        }

        function contactTester(id) {
            const tester = betaTesters.find(t => t.id === id);
            if (tester) {
                alert(`Opening email to contact ${tester.name} (${tester.email})`);
            }
        }

        function viewTesterDetails(id) {
            const tester = betaTesters.find(t => t.id === id);
            if (tester) {
                alert(`Viewing detailed analytics for ${tester.name}`);
            }
        }

        function filterApplications(status) {
            // In production, filter the applications table
            alert(`Filtering applications by: ${status}`);
        }

        // Initialize dashboard when page loads
        document.addEventListener('DOMContentLoaded', initDashboard);
    </script>
</body>
</html>

